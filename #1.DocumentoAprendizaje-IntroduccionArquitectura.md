# #1 Documento de Aprendizaje - IntroducciÃ³n y Arquitectura General

## ğŸ“‹ Ãndice
1. Â¿QuÃ© es Pagina-Solpeds?
2. Arquitectura Cliente-Servidor
3. Estructura del Proyecto
4. Flujo General de la AplicaciÃ³n
5. TecnologÃ­as Utilizadas (VisiÃ³n General)

---

## 1. Â¿QuÃ© es Pagina-Solpeds?

**Pagina-Solpeds** es una aplicaciÃ³n web para gestionar **solicitudes de pedidos y compras**. Permite a los usuarios:

- **Crear pedidos** (solicitudes de materiales/servicios)
- **Crear compras** (Ã³rdenes de compra)
- **Validar y aprobar** pedidos/compras (rol validador/admin)
- **Ver reportes** y estadÃ­sticas (administradores)
- **Recibir notificaciones** de cambios de estado
- **Gestionar usuarios** y permisos

### Roles de Usuario

```
ğŸ‘¤ USUARIO NORMAL
   â”œâ”€ Crear sus propios pedidos
   â”œâ”€ Crear sus propias compras
   â”œâ”€ Ver solo sus pedidos/compras
   â””â”€ Recibir notificaciones

ğŸ” VALIDADOR
   â”œâ”€ Todo lo de usuario normal
   â”œâ”€ Ver todos los pedidos/compras
   â”œâ”€ Validar/aprobar pedidos
   â””â”€ Cambiar estados

ğŸ‘‘ ADMINISTRADOR
   â”œâ”€ Todo lo de validador
   â”œâ”€ Gestionar usuarios
   â”œâ”€ Ver reportes completos
   â”œâ”€ Configurar el sistema
   â””â”€ Gestionar centros de costo y obras
```

---

## 2. Arquitectura Cliente-Servidor

### Â¿QuÃ© es la Arquitectura Cliente-Servidor?

Es un modelo donde:

```
CLIENTE (Frontend)                    SERVIDOR (Backend)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 â”‚                  â”‚                  â”‚
â”‚  Navegador Web  â”‚ â†â”€â”€â”€ HTTP â”€â”€â”€â”€â†’ â”‚   Node.js +      â”‚
â”‚  (React App)    â”‚                  â”‚   Express        â”‚
â”‚                 â”‚                  â”‚                  â”‚
â”‚  Puerto: 5173   â”‚                  â”‚  Puerto: 3001    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                              â†“
                                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                     â”‚   Base de Datos  â”‚
                                     â”‚   (SQLite)       â”‚
                                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Responsabilidades

#### **CLIENTE (Frontend)**
- **Interfaz de usuario** (botones, formularios, tablas)
- **Experiencia visual** (CSS, animaciones)
- **ValidaciÃ³n inicial** de formularios
- **NavegaciÃ³n** entre pÃ¡ginas
- **Almacenamiento temporal** (token en localStorage)

#### **SERVIDOR (Backend)**
- **LÃ³gica de negocio** (reglas de validaciÃ³n)
- **AutenticaciÃ³n** (verificar usuario/contraseÃ±a)
- **AutorizaciÃ³n** (verificar permisos)
- **Acceso a base de datos** (consultas SQL)
- **Procesamiento de archivos** (imÃ¡genes de pedidos)

#### **BASE DE DATOS**
- **Persistencia** de datos
- **Almacenamiento** de usuarios, pedidos, compras
- **Relaciones** entre datos

---

## 3. Estructura del Proyecto

### OrganizaciÃ³n de Carpetas

```
Pagina-solpeds/
â”‚
â”œâ”€â”€ ğŸ“ src/                          â† FRONTEND (React)
â”‚   â”œâ”€â”€ App.jsx                      â† Componente principal
â”‚   â”œâ”€â”€ main.jsx                     â† Punto de entrada
â”‚   â”œâ”€â”€ index.css                    â† Estilos globales
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ pages/                    â† PÃ¡ginas de la app
â”‚   â”‚   â”œâ”€â”€ Login.jsx                â† Pantalla de login
â”‚   â”‚   â”œâ”€â”€ Dashboard.jsx            â† Panel principal
â”‚   â”‚   â”œâ”€â”€ MisPedidos.jsx           â† Lista de pedidos
â”‚   â”‚   â”œâ”€â”€ MisCompras.jsx           â† Lista de compras
â”‚   â”‚   â”œâ”€â”€ AdminPanel.jsx           â† Panel de administraciÃ³n
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ components/               â† Componentes reutilizables
â”‚   â”‚   â”œâ”€â”€ Layout.jsx               â† Plantilla con menÃº lateral
â”‚   â”‚   â””â”€â”€ Modal.jsx                â† Ventanas emergentes
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ contexts/                 â† Estado global
â”‚   â”‚   â””â”€â”€ AuthContext.jsx          â† AutenticaciÃ³n compartida
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“ services/                 â† ComunicaciÃ³n con backend
â”‚       â””â”€â”€ api.js                   â† Cliente HTTP
â”‚
â”œâ”€â”€ ğŸ“ backend/                      â† BACKEND (Express)
â”‚   â”œâ”€â”€ server.js                    â† Servidor principal
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ config/
â”‚   â”‚   â””â”€â”€ database.js              â† ConfiguraciÃ³n de BD
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ routes/                   â† DefiniciÃ³n de URLs
â”‚   â”‚   â”œâ”€â”€ auth.js                  â† /api/auth/*
â”‚   â”‚   â”œâ”€â”€ pedidos.js               â† /api/pedidos/*
â”‚   â”‚   â”œâ”€â”€ compras.js               â† /api/compras/*
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ controllers/              â† LÃ³gica de negocio
â”‚   â”‚   â”œâ”€â”€ authController.js
â”‚   â”‚   â”œâ”€â”€ pedidosController.js
â”‚   â”‚   â”œâ”€â”€ comprasController.js
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ middleware/               â† Interceptores
â”‚   â”‚   â”œâ”€â”€ auth.js                  â† Verificar JWT
â”‚   â”‚   â””â”€â”€ upload.js                â† Subir archivos
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ utils/
â”‚   â”‚   â””â”€â”€ initDatabase.js          â† Crear BD inicial
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ uploads/                  â† Archivos subidos
â”‚   â””â”€â”€ database.sqlite              â† Base de datos
â”‚
â”œâ”€â”€ ğŸ“„ package.json                  â† Dependencias del proyecto
â”œâ”€â”€ ğŸ“„ vite.config.js                â† ConfiguraciÃ³n de Vite
â”œâ”€â”€ ğŸ“„ .env                          â† Variables de entorno
â””â”€â”€ ğŸ“„ README.md                     â† DocumentaciÃ³n
```

---

## 4. Flujo General de la AplicaciÃ³n

### 4.1. Inicio de la AplicaciÃ³n

```
1. Usuario abre http://localhost:5173
   â†“
2. Vite sirve la aplicaciÃ³n React
   â†“
3. Se carga src/main.jsx
   â†“
4. Se renderiza src/App.jsx
   â†“
5. AuthContext verifica si hay token guardado
   â†“
6. Si NO hay token â†’ Redirige a /login
   Si SÃ hay token â†’ Verifica con backend â†’ Redirige a /dashboard
```

### 4.2. Flujo de Login

```
1. Usuario ingresa usuario y contraseÃ±a en Login.jsx
   â†“
2. Frontend envÃ­a POST /api/auth/login al backend
   â†“
3. Backend busca usuario en BD
   â†“
4. Backend compara contraseÃ±as con bcrypt
   â†“
5. Si es correcto:
   â”œâ”€ Genera JWT token
   â”œâ”€ Devuelve { token, user }
   â””â”€ Frontend guarda token en localStorage
   â†“
6. Frontend redirige a /dashboard
```

### 4.3. Flujo de Crear Pedido

```
1. Usuario en MisPedidos.jsx hace clic en "Nuevo Pedido"
   â†“
2. Se abre modal con formulario
   â†“
3. Usuario llena campos (descripciÃ³n, cantidad, obra, etc.)
   â†“
4. Frontend envÃ­a POST /api/pedidos con:
   â”œâ”€ Header: Authorization: Bearer <token>
   â””â”€ Body: { descripcion, cantidad, obra_id, ... }
   â†“
5. Backend recibe request
   â”œâ”€ Middleware auth.js verifica el token
   â”œâ”€ Extrae user_id del token
   â””â”€ Llama a pedidosController.crearPedido()
   â†“
6. Controller ejecuta INSERT en BD
   â†“
7. Backend devuelve { success: true, pedido: {...} }
   â†“
8. Frontend actualiza la lista de pedidos
   â†“
9. Se muestra notificaciÃ³n de Ã©xito
```

### 4.4. Flujo de ValidaciÃ³n (Rol Validador)

```
1. Validador ve lista de pedidos pendientes
   â†“
2. Hace clic en "Aprobar" en un pedido
   â†“
3. Frontend envÃ­a PUT /api/pedidos/:id
   {
     estado: 'aprobado',
     comentarios_validador: 'Todo correcto'
   }
   â†“
4. Backend verifica:
   â”œâ”€ Token vÃ¡lido
   â”œâ”€ Usuario tiene rol 'validador' o 'admin'
   â””â”€ Pedido existe
   â†“
5. Backend actualiza estado en BD
   â†“
6. Backend crea NOTIFICACIÃ“N para el usuario creador
   â†“
7. Frontend actualiza lista
   â†“
8. Usuario creador verÃ¡ notificaciÃ³n en su panel
```

---

## 5. TecnologÃ­as Utilizadas (VisiÃ³n General)

### Frontend

| TecnologÃ­a | PropÃ³sito | Â¿Para quÃ© sirve? |
|------------|-----------|------------------|
| **React** | Framework de UI | Crear interfaces interactivas |
| **Vite** | Build tool | Servidor de desarrollo rÃ¡pido |
| **React Router** | NavegaciÃ³n | Cambiar entre pÃ¡ginas sin recargar |

### Backend

| TecnologÃ­a | PropÃ³sito | Â¿Para quÃ© sirve? |
|------------|-----------|------------------|
| **Node.js** | Runtime de JavaScript | Ejecutar JavaScript en el servidor |
| **Express** | Framework web | Crear API REST fÃ¡cilmente |
| **SQLite** | Base de datos | Almacenar datos persistentes |

### Seguridad

| TecnologÃ­a | PropÃ³sito | Â¿Para quÃ© sirve? |
|------------|-----------|------------------|
| **JWT** | AutenticaciÃ³n | Tokens de sesiÃ³n sin cookies |
| **bcryptjs** | EncriptaciÃ³n | Proteger contraseÃ±as |
| **CORS** | Seguridad | Controlar acceso entre dominios |

### Utilidades

| TecnologÃ­a | PropÃ³sito | Â¿Para quÃ© sirve? |
|------------|-----------|------------------|
| **Multer** | Upload de archivos | Subir fotos de pedidos |
| **Nodemon** | Desarrollo | Reiniciar servidor automÃ¡ticamente |
| **Concurrently** | Scripts | Ejecutar frontend y backend juntos |

---

## 6. Conceptos Clave a Entender

### 6.1. Single Page Application (SPA)

La aplicaciÃ³n **NO recarga la pÃ¡gina** al navegar:

```
âŒ AplicaciÃ³n tradicional:
   /login    â†’ Carga pÃ¡gina login.html
   /dashboard â†’ Carga pÃ¡gina dashboard.html (RECARGA COMPLETA)

âœ… SPA (React):
   /login    â†’ Muestra componente Login
   /dashboard â†’ Muestra componente Dashboard (SIN RECARGAR)
```

### 6.2. API REST

El backend expone **endpoints** (URLs) que el frontend consume:

```
GET    /api/pedidos        â†’ Obtener lista
POST   /api/pedidos        â†’ Crear nuevo
PUT    /api/pedidos/:id    â†’ Actualizar
DELETE /api/pedidos/:id    â†’ Eliminar
```

### 6.3. AutenticaciÃ³n Stateless (Sin sesiones)

```
âŒ AutenticaciÃ³n tradicional (con sesiones):
   1. Login â†’ Servidor crea sesiÃ³n en memoria
   2. Servidor envÃ­a cookie con session_id
   3. Cada request envÃ­a cookie
   4. Servidor busca sesiÃ³n en memoria

âœ… AutenticaciÃ³n JWT (stateless):
   1. Login â†’ Servidor genera TOKEN (no guarda nada)
   2. Cliente guarda token en localStorage
   3. Cada request envÃ­a token en header
   4. Servidor VERIFICA token (sin buscar en BD)
```

**Ventaja:** El servidor no guarda estado, mÃ¡s escalable.

### 6.4. Componentes React

La UI se divide en **componentes reutilizables**:

```jsx
<Dashboard>                    â† Componente principal
  <Layout>                     â† Layout con menÃº
    <Sidebar>                  â† MenÃº lateral
      <MenuLink />             â† Cada Ã­tem del menÃº
      <MenuLink />
    </Sidebar>

    <MainContent>              â† Contenido principal
      <WelcomeCard />          â† Tarjeta de bienvenida
      <StatsGrid>              â† CuadrÃ­cula de estadÃ­sticas
        <StatCard />           â† Cada tarjeta
        <StatCard />
        <StatCard />
      </StatsGrid>
    </MainContent>
  </Layout>
</Dashboard>
```

---

## 7. PrÃ³ximos Pasos

En los siguientes documentos profundizaremos en:

- **#2:** JavaScript ES6+ y sus caracterÃ­sticas modernas
- **#3:** Node.js y npm (gestiÃ³n de paquetes)
- **#4:** Express.js y arquitectura del backend
- **#5:** SQLite y base de datos
- **#6:** JWT y autenticaciÃ³n
- **#7:** React fundamentos
- **#8:** React Router
- **#9:** Context API
- **#10:** Vite
- **#11-15:** Flujos completos de cada mÃ³dulo

---

## 8. Glosario RÃ¡pido

| TÃ©rmino | Significado |
|---------|-------------|
| **Frontend** | Parte visual que el usuario ve (interfaz) |
| **Backend** | Servidor que procesa lÃ³gica y datos |
| **API** | Interfaz para comunicar frontend y backend |
| **Endpoint** | URL especÃ­fica de la API (ej: `/api/pedidos`) |
| **Token** | Credencial de sesiÃ³n encriptada |
| **Middleware** | FunciÃ³n que intercepta requests |
| **Component** | Pieza reutilizable de UI en React |
| **Route** | Ruta de navegaciÃ³n (ej: `/dashboard`) |
| **State** | Datos que cambian en la aplicaciÃ³n |
| **Props** | Datos que se pasan entre componentes |

---

**ğŸ“Œ ContinÃºa con:** [#2 - JavaScript ES6+ y Fundamentos](#)
