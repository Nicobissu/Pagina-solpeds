# #2 Documento de Aprendizaje - JavaScript ES6+ y Fundamentos

## üìã √çndice
1. ¬øQu√© es JavaScript ES6+?
2. Variables: const, let vs var
3. Arrow Functions
4. Template Literals
5. Destructuring
6. Spread Operator
7. M√≥dulos: import/export
8. Promesas y Async/Await
9. M√©todos de Arrays Modernos
10. Ejemplos Reales de la Aplicaci√≥n

---

## 1. ¬øQu√© es JavaScript ES6+?

**ES6** (ECMAScript 2015) es una versi√≥n mayor de JavaScript que introdujo caracter√≠sticas modernas. **ES6+** incluye ES6 y todas las versiones posteriores (ES7, ES8, ES9, etc.).

### ¬øPor qu√© ES6+?

```javascript
// ‚ùå JavaScript antiguo (ES5)
var userName = 'Juan';
function greet() {
  return 'Hola ' + userName;
}

// ‚úÖ JavaScript moderno (ES6+)
const userName = 'Juan';
const greet = () => `Hola ${userName}`;
```

**Ventajas:**
- C√≥digo m√°s limpio y legible
- Menos errores comunes
- Mejores herramientas para trabajar con datos
- Sintaxis m√°s concisa

---

## 2. Variables: const, let vs var

### const (Constante)

**Uso:** Para valores que NO cambiar√°n.

```javascript
// ‚úÖ Bueno
const PI = 3.14159;
const userName = 'Juan';
const config = { port: 3001 };

// ‚ùå Error - no se puede reasignar
const edad = 25;
edad = 26; // TypeError: Assignment to constant variable
```

**‚ö†Ô∏è IMPORTANTE:** `const` con objetos/arrays:

```javascript
// ‚úÖ Puedes modificar propiedades
const user = { name: 'Juan' };
user.name = 'Pedro';        // ‚úÖ Funciona
user.age = 30;              // ‚úÖ Funciona

// ‚ùå No puedes reasignar el objeto completo
user = { name: 'Mar√≠a' };   // ‚ùå Error
```

### let (Variable)

**Uso:** Para valores que S√ç cambiar√°n.

```javascript
// ‚úÖ Bueno
let contador = 0;
contador = 1;     // ‚úÖ Funciona
contador++;       // ‚úÖ Funciona

let estado = 'pendiente';
estado = 'aprobado'; // ‚úÖ Funciona
```

### var (Obsoleto - NO USAR)

```javascript
// ‚ùå NO USAR var - tiene problemas de alcance
var x = 10;

// Usa const o let siempre
```

### Regla de Oro

```
1. Usa const por defecto
2. Usa let solo si necesitas reasignar
3. NUNCA uses var
```

### Ejemplo Real de la App

```javascript
// backend/controllers/pedidosController.js

// ‚úÖ const porque no reasignamos la funci√≥n
export const getPedidos = async (req, res) => {
  // ‚úÖ const porque req.user no cambia
  const userId = req.user.id;
  const userRole = req.user.rol;

  // ‚úÖ let porque la query cambia seg√∫n el rol
  let query = 'SELECT * FROM pedidos';

  if (userRole !== 'admin') {
    query += ' WHERE usuario_id = ?';
  }

  // const porque db no cambia
  const pedidos = await db.all(query, [userId]);

  res.json({ pedidos });
};
```

---

## 3. Arrow Functions (Funciones Flecha)

### Sintaxis B√°sica

```javascript
// ‚ùå Funci√≥n tradicional
function sumar(a, b) {
  return a + b;
}

// ‚úÖ Arrow function
const sumar = (a, b) => {
  return a + b;
};

// ‚úÖ Arrow function simplificada (return impl√≠cito)
const sumar = (a, b) => a + b;
```

### Reglas de Sintaxis

```javascript
// 1 par√°metro ‚Üí sin par√©ntesis
const duplicar = x => x * 2;

// 0 o 2+ par√°metros ‚Üí con par√©ntesis
const saludar = () => 'Hola';
const sumar = (a, b) => a + b;

// Sin return expl√≠cito (una l√≠nea)
const cuadrado = x => x * x;

// Con return expl√≠cito (bloque)
const procesarPedido = (pedido) => {
  const total = pedido.cantidad * pedido.precio;
  return total;
};

// Retornar objeto ‚Üí usar par√©ntesis
const crearUsuario = (nombre, edad) => ({ nombre, edad });
```

### Ejemplo Real de la App

```javascript
// src/services/api.js

// ‚úÖ Arrow function para funci√≥n de login
export const login = async (username, password) => {
  const response = await fetch(`${API_URL}/auth/login`, {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
    },
    body: JSON.stringify({ username, password }),
  });

  const data = await response.json();
  return data;
};

// ‚úÖ Arrow function para obtener pedidos
export const getPedidos = async () => {
  const response = await fetch(`${API_URL}/pedidos`, {
    headers: {
      'Authorization': `Bearer ${getToken()}`,
    },
  });

  return response.json();
};
```

### Diferencia con Funciones Tradicionales

```javascript
// Arrow functions NO tienen su propio "this"

// ‚ùå Funci√≥n tradicional
function Contador() {
  this.count = 0;

  setInterval(function() {
    this.count++; // ‚ùå "this" es undefined
  }, 1000);
}

// ‚úÖ Arrow function
function Contador() {
  this.count = 0;

  setInterval(() => {
    this.count++; // ‚úÖ "this" se hereda del contexto
  }, 1000);
}
```

---

## 4. Template Literals (Plantillas de Texto)

### Sintaxis: Usar `` (backticks) en lugar de '' o ""

```javascript
// ‚ùå Concatenaci√≥n antigua
const nombre = 'Juan';
const edad = 25;
const mensaje = 'Hola, soy ' + nombre + ' y tengo ' + edad + ' a√±os';

// ‚úÖ Template literals
const mensaje = `Hola, soy ${nombre} y tengo ${edad} a√±os`;
```

### Ventajas

**1. Interpolaci√≥n de Variables**

```javascript
const pedidoId = 123;
const url = `${API_URL}/pedidos/${pedidoId}`;
// Resultado: "http://localhost:3001/api/pedidos/123"
```

**2. Expresiones JavaScript**

```javascript
const precio = 100;
const cantidad = 3;
const mensaje = `Total: $${precio * cantidad}`;
// Resultado: "Total: $300"
```

**3. Multil√≠nea**

```javascript
// ‚ùå Antiguo
const html = '<div>\n' +
             '  <h1>T√≠tulo</h1>\n' +
             '</div>';

// ‚úÖ Template literal
const html = `
  <div>
    <h1>T√≠tulo</h1>
  </div>
`;
```

### Ejemplo Real de la App

```javascript
// backend/routes/pedidos.js

router.get('/', auth, async (req, res) => {
  const { id, rol } = req.user;

  // ‚úÖ Template literal para query SQL
  let query = `
    SELECT p.*, u.username as usuario_nombre, cc.nombre as centro_costo_nombre
    FROM pedidos p
    LEFT JOIN usuarios u ON p.usuario_id = u.id
    LEFT JOIN centros_costo cc ON p.centro_costo_id = cc.id
  `;

  // ‚úÖ Interpolaci√≥n condicional
  if (rol !== 'admin' && rol !== 'validador') {
    query += ` WHERE p.usuario_id = ${id}`;
  }

  query += ` ORDER BY p.created_at DESC`;

  const pedidos = await db.all(query);
  res.json({ pedidos });
});
```

```javascript
// src/services/api.js

// ‚úÖ URLs din√°micas
export const updatePedido = async (id, data) => {
  const response = await fetch(`${API_URL}/pedidos/${id}`, {
    method: 'PUT',
    headers: {
      'Content-Type': 'application/json',
      'Authorization': `Bearer ${getToken()}`,
    },
    body: JSON.stringify(data),
  });

  return response.json();
};
```

---

## 5. Destructuring (Desestructuraci√≥n)

### Desestructuraci√≥n de Objetos

```javascript
// ‚ùå Sin destructuring
const user = {
  id: 1,
  username: 'juan',
  rol: 'admin'
};

const id = user.id;
const username = user.username;
const rol = user.rol;

// ‚úÖ Con destructuring
const { id, username, rol } = user;
```

**Con Renombrado:**

```javascript
const user = { id: 1, username: 'juan' };

// Renombrar al extraer
const { id: userId, username: userName } = user;

console.log(userId);   // 1
console.log(userName); // 'juan'
```

**Con Valores por Defecto:**

```javascript
const user = { username: 'juan' };

const { username, rol = 'usuario' } = user;

console.log(rol); // 'usuario' (valor por defecto)
```

### Desestructuraci√≥n de Arrays

```javascript
const numeros = [1, 2, 3, 4, 5];

// ‚ùå Sin destructuring
const primero = numeros[0];
const segundo = numeros[1];

// ‚úÖ Con destructuring
const [primero, segundo] = numeros;

// Saltar elementos
const [, , tercero] = numeros; // tercero = 3
```

### Ejemplo Real de la App

```javascript
// backend/controllers/authController.js

export const login = async (req, res) => {
  // ‚úÖ Destructuring del body
  const { username, password } = req.body;

  // Sin destructuring ser√≠a:
  // const username = req.body.username;
  // const password = req.body.password;

  const user = await db.get(
    'SELECT * FROM usuarios WHERE username = ?',
    [username]
  );

  if (!user) {
    return res.status(401).json({ error: 'Usuario no encontrado' });
  }

  const validPassword = await bcrypt.compare(password, user.password);

  if (!validPassword) {
    return res.status(401).json({ error: 'Contrase√±a incorrecta' });
  }

  // ‚úÖ Destructuring para excluir password
  const { password: _, ...userWithoutPassword } = user;

  const token = jwt.sign(
    { id: user.id, username: user.username, rol: user.rol },
    process.env.JWT_SECRET,
    { expiresIn: '24h' }
  );

  res.json({ token, user: userWithoutPassword });
};
```

```javascript
// src/contexts/AuthContext.jsx

export const AuthProvider = ({ children }) => {
  const [user, setUser] = useState(null);
  const [loading, setLoading] = useState(true);

  const login = async (username, password) => {
    // ‚úÖ Destructuring de la respuesta
    const { token, user: userData } = await api.login(username, password);

    localStorage.setItem('token', token);
    setUser(userData);
  };

  return (
    <AuthContext.Provider value={{ user, login, loading }}>
      {children}
    </AuthContext.Provider>
  );
};
```

---

## 6. Spread Operator (...) y Rest Parameters

### Spread Operator (Expandir)

**Con Arrays:**

```javascript
const arr1 = [1, 2, 3];
const arr2 = [4, 5, 6];

// ‚ùå Concatenar antiguo
const combined = arr1.concat(arr2);

// ‚úÖ Spread operator
const combined = [...arr1, ...arr2];
// Resultado: [1, 2, 3, 4, 5, 6]

// Agregar elementos
const withExtra = [0, ...arr1, 3.5, ...arr2, 7];
// Resultado: [0, 1, 2, 3, 3.5, 4, 5, 6, 7]
```

**Con Objetos:**

```javascript
const user = { id: 1, username: 'juan' };
const extraData = { edad: 25, ciudad: 'Madrid' };

// ‚úÖ Combinar objetos
const fullUser = { ...user, ...extraData };
// Resultado: { id: 1, username: 'juan', edad: 25, ciudad: 'Madrid' }

// ‚úÖ Actualizar propiedades
const updatedUser = { ...user, username: 'pedro' };
// Resultado: { id: 1, username: 'pedro' }
```

### Rest Parameters (Recoger)

**En Funciones:**

```javascript
// Recoger par√°metros restantes
const sumar = (...numeros) => {
  return numeros.reduce((total, num) => total + num, 0);
};

sumar(1, 2, 3);        // 6
sumar(1, 2, 3, 4, 5);  // 15
```

**En Destructuring:**

```javascript
const user = {
  id: 1,
  username: 'juan',
  password: '123',
  email: 'juan@example.com'
};

// ‚úÖ Extraer password, guardar el resto
const { password, ...userSafe } = user;

console.log(userSafe);
// { id: 1, username: 'juan', email: 'juan@example.com' }
```

### Ejemplo Real de la App

```javascript
// backend/controllers/pedidosController.js

export const updatePedido = async (req, res) => {
  const { id } = req.params;

  // ‚úÖ Spread para copiar datos y agregar campos
  const pedidoData = {
    ...req.body,
    updated_at: new Date().toISOString()
  };

  await db.run(
    `UPDATE pedidos SET
      descripcion = ?,
      cantidad = ?,
      estado = ?,
      updated_at = ?
    WHERE id = ?`,
    [
      pedidoData.descripcion,
      pedidoData.cantidad,
      pedidoData.estado,
      pedidoData.updated_at,
      id
    ]
  );

  res.json({ success: true, pedido: pedidoData });
};
```

```javascript
// src/pages/MisPedidos.jsx

const handleEditPedido = async (pedido) => {
  // ‚úÖ Spread para crear copia y modificar
  const updatedPedido = {
    ...pedido,
    estado: 'modificado',
    fecha_modificacion: new Date()
  };

  await api.updatePedido(pedido.id, updatedPedido);
};
```

---

## 7. M√≥dulos: import/export

### ¬øQu√© son los M√≥dulos?

Permiten **dividir c√≥digo en archivos separados** y **reutilizar** funciones/variables.

### Export (Exportar)

**Named Exports (Exportaciones con Nombre):**

```javascript
// utils/math.js

// ‚úÖ Exportar individual
export const sumar = (a, b) => a + b;
export const restar = (a, b) => a - b;

// ‚úÖ Exportar al final
const multiplicar = (a, b) => a * b;
const dividir = (a, b) => a / b;

export { multiplicar, dividir };
```

**Default Export (Exportaci√≥n por Defecto):**

```javascript
// components/Button.js

// ‚úÖ Solo puede haber UNA exportaci√≥n default por archivo
const Button = ({ children, onClick }) => {
  return <button onClick={onClick}>{children}</button>;
};

export default Button;
```

### Import (Importar)

**Named Imports:**

```javascript
// app.js

// ‚úÖ Importar espec√≠ficos
import { sumar, restar } from './utils/math.js';

sumar(2, 3);   // 5
restar(5, 2);  // 3

// ‚úÖ Importar todos como namespace
import * as Math from './utils/math.js';

Math.sumar(2, 3);      // 5
Math.multiplicar(4, 5); // 20

// ‚úÖ Renombrar al importar
import { sumar as add, restar as subtract } from './utils/math.js';

add(2, 3);       // 5
subtract(5, 2);  // 3
```

**Default Import:**

```javascript
// app.js

// ‚úÖ Importar default (sin llaves, cualquier nombre)
import Button from './components/Button.js';
import MiBoton from './components/Button.js'; // Tambi√©n v√°lido
```

**Combinar:**

```javascript
// ‚úÖ Importar default y named juntos
import React, { useState, useEffect } from 'react';
//     ^default  ^named exports
```

### Ejemplo Real de la App

```javascript
// backend/routes/pedidos.js

// ‚úÖ Importar m√≥dulos de Node
import express from 'express';

// ‚úÖ Importar middleware personalizado
import { auth, isAdmin } from '../middleware/auth.js';

// ‚úÖ Importar todas las funciones del controller
import * as pedidosController from '../controllers/pedidosController.js';

// ‚úÖ Crear router
const router = express.Router();

// ‚úÖ Usar las funciones importadas
router.get('/', auth, pedidosController.getPedidos);
router.post('/', auth, pedidosController.createPedido);
router.put('/:id', auth, pedidosController.updatePedido);

// ‚úÖ Exportar router como default
export default router;
```

```javascript
// src/App.jsx

// ‚úÖ Importar componentes
import { BrowserRouter, Routes, Route } from 'react-router-dom';
import Login from './pages/Login';
import Dashboard from './pages/Dashboard';
import MisPedidos from './pages/MisPedidos';

// ‚úÖ Importar contexto
import { AuthProvider } from './contexts/AuthContext';

function App() {
  return (
    <AuthProvider>
      <BrowserRouter>
        <Routes>
          <Route path="/login" element={<Login />} />
          <Route path="/dashboard" element={<Dashboard />} />
          <Route path="/pedidos" element={<MisPedidos />} />
        </Routes>
      </BrowserRouter>
    </AuthProvider>
  );
}

export default App;
```

---

## 8. Promesas y Async/Await

### ¬øQu√© es una Promesa?

Una **promesa** representa un valor que **estar√° disponible en el futuro**.

```javascript
// Operaci√≥n que tarda tiempo
const fetchData = () => {
  return new Promise((resolve, reject) => {
    setTimeout(() => {
      const data = { id: 1, name: 'Juan' };
      resolve(data);  // ‚úÖ √âxito
      // reject('Error'); // ‚ùå Error
    }, 1000);
  });
};
```

### Usando Promesas con .then()

```javascript
// ‚ùå Forma antigua (callback hell)
fetchData()
  .then(data => {
    console.log(data);
    return fetchMoreData(data.id);
  })
  .then(moreData => {
    console.log(moreData);
  })
  .catch(error => {
    console.error(error);
  });
```

### Async/Await (Forma Moderna)

```javascript
// ‚úÖ Forma moderna (m√°s legible)
const loadData = async () => {
  try {
    const data = await fetchData();
    console.log(data);

    const moreData = await fetchMoreData(data.id);
    console.log(moreData);
  } catch (error) {
    console.error(error);
  }
};
```

### Reglas de Async/Await

```javascript
// 1. Las funciones con "await" deben ser "async"
const getData = async () => {
  const result = await fetch('/api/data');
  return result.json();
};

// 2. "await" solo funciona dentro de funciones async
// ‚ùå Error
const data = await fetch('/api/data'); // SyntaxError

// ‚úÖ Correcto
const getData = async () => {
  const data = await fetch('/api/data');
  return data;
};

// 3. Siempre usar try/catch para errores
const getData = async () => {
  try {
    const response = await fetch('/api/data');
    const data = await response.json();
    return data;
  } catch (error) {
    console.error('Error:', error);
    throw error;
  }
};
```

### Ejemplo Real de la App

```javascript
// backend/controllers/pedidosController.js

// ‚úÖ Funci√≥n async para operaciones de BD
export const getPedidos = async (req, res) => {
  try {
    // ‚úÖ await para esperar query de BD
    const pedidos = await db.all('SELECT * FROM pedidos');

    // ‚úÖ Devolver respuesta
    res.json({ pedidos });
  } catch (error) {
    console.error('Error al obtener pedidos:', error);
    res.status(500).json({ error: 'Error del servidor' });
  }
};

export const createPedido = async (req, res) => {
  try {
    const { descripcion, cantidad, obra_id } = req.body;
    const userId = req.user.id;

    // ‚úÖ await para insertar en BD
    const result = await db.run(
      `INSERT INTO pedidos (descripcion, cantidad, obra_id, usuario_id, estado)
       VALUES (?, ?, ?, ?, ?)`,
      [descripcion, cantidad, obra_id, userId, 'pendiente']
    );

    // ‚úÖ await para obtener el pedido creado
    const nuevoPedido = await db.get(
      'SELECT * FROM pedidos WHERE id = ?',
      [result.lastID]
    );

    res.status(201).json({ pedido: nuevoPedido });
  } catch (error) {
    console.error('Error al crear pedido:', error);
    res.status(500).json({ error: 'Error al crear pedido' });
  }
};
```

```javascript
// src/services/api.js

// ‚úÖ Funci√≥n async para llamadas HTTP
export const login = async (username, password) => {
  try {
    // ‚úÖ await para esperar respuesta HTTP
    const response = await fetch(`${API_URL}/auth/login`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ username, password })
    });

    // ‚úÖ await para parsear JSON
    const data = await response.json();

    if (!response.ok) {
      throw new Error(data.error || 'Error en login');
    }

    return data;
  } catch (error) {
    console.error('Error en login:', error);
    throw error;
  }
};
```

```javascript
// src/pages/Login.jsx

const Login = () => {
  const { login } = useContext(AuthContext);

  // ‚úÖ Handler async
  const handleSubmit = async (e) => {
    e.preventDefault();

    try {
      // ‚úÖ await para esperar login
      await login(username, password);

      // Redirigir despu√©s de login exitoso
      navigate('/dashboard');
    } catch (error) {
      alert('Error: ' + error.message);
    }
  };

  return (
    <form onSubmit={handleSubmit}>
      {/* ... */}
    </form>
  );
};
```

---

## 9. M√©todos de Arrays Modernos

### map() - Transformar Elementos

```javascript
const numeros = [1, 2, 3, 4];

// ‚úÖ Duplicar cada n√∫mero
const duplicados = numeros.map(num => num * 2);
// [2, 4, 6, 8]

// ‚úÖ Transformar objetos
const usuarios = [
  { id: 1, nombre: 'Juan' },
  { id: 2, nombre: 'Mar√≠a' }
];

const nombres = usuarios.map(user => user.nombre);
// ['Juan', 'Mar√≠a']
```

### filter() - Filtrar Elementos

```javascript
const numeros = [1, 2, 3, 4, 5, 6];

// ‚úÖ Solo n√∫meros pares
const pares = numeros.filter(num => num % 2 === 0);
// [2, 4, 6]

// ‚úÖ Filtrar pedidos pendientes
const pedidos = [
  { id: 1, estado: 'pendiente' },
  { id: 2, estado: 'aprobado' },
  { id: 3, estado: 'pendiente' }
];

const pendientes = pedidos.filter(p => p.estado === 'pendiente');
// [{ id: 1, estado: 'pendiente' }, { id: 3, estado: 'pendiente' }]
```

### find() - Encontrar Elemento

```javascript
const usuarios = [
  { id: 1, nombre: 'Juan' },
  { id: 2, nombre: 'Mar√≠a' },
  { id: 3, nombre: 'Pedro' }
];

// ‚úÖ Encontrar por id
const usuario = usuarios.find(u => u.id === 2);
// { id: 2, nombre: 'Mar√≠a' }

// Si no encuentra, devuelve undefined
const noExiste = usuarios.find(u => u.id === 999);
// undefined
```

### reduce() - Reducir a un Valor

```javascript
const numeros = [1, 2, 3, 4, 5];

// ‚úÖ Sumar todos
const suma = numeros.reduce((total, num) => total + num, 0);
// 15

// ‚úÖ Contar por categor√≠a
const pedidos = [
  { estado: 'pendiente' },
  { estado: 'aprobado' },
  { estado: 'pendiente' },
  { estado: 'rechazado' }
];

const conteo = pedidos.reduce((acc, pedido) => {
  acc[pedido.estado] = (acc[pedido.estado] || 0) + 1;
  return acc;
}, {});
// { pendiente: 2, aprobado: 1, rechazado: 1 }
```

### Ejemplo Real de la App

```javascript
// src/pages/Dashboard.jsx

const Dashboard = () => {
  const [pedidos, setPedidos] = useState([]);

  // ‚úÖ filter() para estad√≠sticas
  const pendientes = pedidos.filter(p => p.estado === 'pendiente').length;
  const aprobados = pedidos.filter(p => p.estado === 'aprobado').length;
  const rechazados = pedidos.filter(p => p.estado === 'rechazado').length;

  // ‚úÖ reduce() para calcular total
  const totalInversion = pedidos.reduce((total, pedido) => {
    return total + (pedido.cantidad * pedido.precio_unitario);
  }, 0);

  return (
    <div>
      <StatCard title="Pendientes" value={pendientes} />
      <StatCard title="Aprobados" value={aprobados} />
      <StatCard title="Total" value={`$${totalInversion}`} />
    </div>
  );
};
```

```javascript
// src/pages/MisPedidos.jsx

const MisPedidos = () => {
  const [pedidos, setPedidos] = useState([]);

  return (
    <div>
      {/* ‚úÖ map() para renderizar lista */}
      {pedidos.map(pedido => (
        <PedidoCard
          key={pedido.id}
          pedido={pedido}
          onEdit={() => handleEdit(pedido)}
          onDelete={() => handleDelete(pedido.id)}
        />
      ))}
    </div>
  );
};
```

---

## 10. Resumen: Patrones Comunes en la App

### Patr√≥n 1: Funci√≥n Controller (Backend)

```javascript
// ESTRUCTURA EST√ÅNDAR de un controller

export const getNombre = async (req, res) => {
  try {
    // 1. Destructuring de par√°metros
    const { id } = req.params;
    const { filtro } = req.query;
    const userId = req.user.id;

    // 2. Operaci√≥n async con BD
    const datos = await db.all('SELECT * FROM tabla WHERE id = ?', [id]);

    // 3. Respuesta exitosa
    res.json({ datos });
  } catch (error) {
    // 4. Manejo de errores
    console.error('Error:', error);
    res.status(500).json({ error: 'Error del servidor' });
  }
};
```

### Patr√≥n 2: Funci√≥n API (Frontend)

```javascript
// ESTRUCTURA EST√ÅNDAR de llamada API

export const getRecurso = async (id) => {
  try {
    // 1. Template literal para URL
    const response = await fetch(`${API_URL}/recurso/${id}`, {
      headers: {
        'Authorization': `Bearer ${getToken()}`,
      },
    });

    // 2. Parsear respuesta
    const data = await response.json();

    // 3. Validar respuesta
    if (!response.ok) {
      throw new Error(data.error);
    }

    return data;
  } catch (error) {
    console.error('Error:', error);
    throw error;
  }
};
```

### Patr√≥n 3: Componente React

```javascript
// ESTRUCTURA EST√ÅNDAR de componente

import { useState, useEffect } from 'react';
import * as api from '../services/api';

const MiComponente = () => {
  // 1. Estado con useState
  const [datos, setDatos] = useState([]);
  const [loading, setLoading] = useState(true);

  // 2. Cargar datos con useEffect
  useEffect(() => {
    loadDatos();
  }, []);

  // 3. Funci√≥n async para cargar
  const loadDatos = async () => {
    try {
      const result = await api.getDatos();
      setDatos(result);
    } catch (error) {
      console.error(error);
    } finally {
      setLoading(false);
    }
  };

  // 4. Renderizado
  return (
    <div>
      {datos.map(item => (
        <div key={item.id}>{item.nombre}</div>
      ))}
    </div>
  );
};

export default MiComponente;
```

---

**üìå Contin√∫a con:** [#3 - Node.js y npm](##)
